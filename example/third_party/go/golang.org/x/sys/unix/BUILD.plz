subinclude("//build_defs")

fileexport(
    name = "unix",
    srcs = [
        "unix/syscall.go",
        "unix/aliases.go",
        "unix/syscall_unix.go",
        "unix/sockcmsg_unix_other.go",
        "unix/ioctl.go",
        "unix/str.go",
        "unix/sockcmsg_unix.go",
        "unix/dirent.go",
        "unix/env_unix.go",
        "unix/pagesize_unix.go",
        "unix/constants.go",
        "unix/race0.go",
        "unix/fdset.go",
        "unix/timestruct.go",
        "unix/endian_little.go",
        "unix/syscall_unix_gc.go",
    ] + select({
        "//example/third_party/go/__config:darwin_amd64": [
            "unix/ztypes_darwin_amd64.go",
            "unix/readdirent_getdirentries.go",
            "unix/zsyscall_darwin_amd64.1_13.go",
            "unix/syscall_darwin.go",
            "unix/zerrors_darwin_amd64.go",
            "unix/syscall_darwin_libSystem.go",
            "unix/syscall_bsd.go",
            "unix/syscall_darwin.1_13.go",
            "unix/dev_darwin.go",
            "unix/syscall_darwin_amd64.go",
            "unix/zsyscall_darwin_amd64.go",
            "unix/fcntl_darwin.go",
        ],
        "//example/third_party/go/__config:linux_amd64": [
            "unix/ztypes_linux_amd64.go",
            "unix/readdirent_getdents.go",
            "unix/zsysnum_linux_amd64.go",
            "unix/syscall_linux_amd64.go",
            "unix/syscall_linux_gc.go",
            "unix/zsyscall_linux.go",
            "unix/fcntl.go",
            "unix/bluetooth_linux.go",
            "unix/ztypes_linux.go",
            "unix/zerrors_linux.go",
            "unix/zptrace_x86_linux.go",
            "unix/zsyscall_linux_amd64.go",
            "unix/syscall_linux.go",
            "unix/affinity_linux.go",
            "unix/sockcmsg_linux.go",
            "unix/zerrors_linux_amd64.go",
            "unix/dev_linux.go",
            "unix/syscall_linux_amd64_gc.go",
        ],
        "default": [],
    }),
    tag = "go_source",
    deps = ["//example/third_party/go/golang.org/x/sys:_sys#download"],
)

fileexport(
    name = "unix",
    srcs = select({
        "//example/third_party/go/__config:darwin_amd64": [
            "unix/zsyscall_darwin_amd64.s",
            "unix/asm_darwin_amd64.s",
            "unix/zsyscall_darwin_amd64.1_13.s",
        ],
        "//example/third_party/go/__config:linux_amd64": ["unix/asm_linux_amd64.s"],
        "default": [],
    }),
    tag = "s_source",
    deps = ["//example/third_party/go/golang.org/x/sys:_sys#download"],
)

go_library(
    name = "unix",
    srcs = [":_unix#go_source"],
    asm_srcs = [":_unix#s_source"],
    cover = False,
    import_path = "golang.org/x/sys/unix",
    visibility = ["PUBLIC"],
    deps = ["//example/third_party/go/golang.org/x/sys/internal/unsafeheader"],
)
